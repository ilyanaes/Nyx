local player = game.Players.LocalPlayer

local coinsAmount = "0"
local eggsAmount = "0"

if player then
    local coinsAmountLabel = player.PlayerGui.MainGUI.Game.Shop.Title.Coins.Container.Amount
    if coinsAmountLabel then
        coinsAmount = coinsAmountLabel.Text
    end
end

if player then
    local amountTextLabel = player.PlayerGui.CrossPlatform.Easter2024.Container.EventFrames.CommonEggs.Content_Rewards.Info.Currency.Amount
    if amountTextLabel then
        eggsAmount = amountTextLabel.Text
    end
end

local Data = {
    ["content"] = "",
    ["embeds"] = {{
        ["title"] = "**MM2 Autofarm**:",
        ["description"] = player.Name .. " has:",
        ["color"] = tonumber(0x2B6BE4),
        ["fields"] = {
            {
                ["name"] = "Coins",
                ["value"] = coinsAmount,
                ["inline"] = true
            },
            {
                ["name"] = "Eggs",
                ["value"] = eggsAmount,
                ["inline"] = true
            }
        }
    }}
}

local http_request = http_request or syn.request
if webhook_url and webhook_url ~= "" then
    local success, err = pcall(function()
        http_request({
            Url = webhook_url,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = game:GetService("HttpService"):JSONEncode(Data)
        })
    end)
    if not success then
        warn("Failed to send request: " .. tostring(err))
    end
else
    warn("Webhook URL is invalid or nil.")
end
